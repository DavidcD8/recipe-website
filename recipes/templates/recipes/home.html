{% extends 'recipes/base.html' %}
{% load static %}
{% block content %}
  <!-- Hero Section -->
  <section id="hero">
    <div class="hero-content">
        <h1>Discover Delicious Recipes</h1>
        <p>Find your next favorite meal or share your own!</p>
        <a href="#all-recipes" class="btn-primary">Browse Recipes</a>
    </div>
  </section>

  <!-- Featured Recipes Section -->
  <section id="featured-recipes">
      <h2>Featured Recipes</h2>
      <div class="horizontal-featured-recipes">
          {% for recipe in featured_recipes %}
              <div class="featured-recipe">
                  <div class="featured-recipe-img">
                      {% if recipe.image %}
                          <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}">
                      {% else %}
                          <img src="{% static 'images/placeholder.jpg' %}" alt="Placeholder image">
                      {% endif %}
                  </div>
                  <div class="featured-recipe-text">
                      <h3 class="featured-recipe-title">{{ recipe.title }}</h3>
                      <p class="featured-recipe-description">{{ recipe.ingredients|truncatewords:20 }}</p>
                      <p class="featured-recipe-rating">
                          <strong>Rating:</strong>
                          <span class="rating-stars">
                              {% with recipe.avg_rating|default:0 as avg_rating %}
                                  {% for i in "12345"|make_list %}
                                      {% if forloop.counter <= avg_rating %}
                                          <span>★</span>
                                      {% else %}
                                          <span>☆</span>
                                      {% endif %}
                                  {% endfor %}
                              {% endwith %}
                          </span>
                          ({{ recipe.avg_rating|default:"No ratings" }})
                      </p>
                      <a href="{% url 'recipe_detail' recipe.id %}">View Recipe</a>
                  </div>
              </div>
          {% endfor %}
      </div>
  </section>

  <!-- New Recipes Section (Optional) -->
  <section id="new-recipes">
      <h2>New Recipes</h2>
      <div class="recipe-list">
          {% for recipe in new_recipes %}
              <div class="recipe-item">
                  <div class="recipe-item-img">
                      {% if recipe.image %}
                          <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}">
                      {% else %}
                          <img src="{% static 'images/placeholder.jpg' %}" alt="Placeholder image">
                      {% endif %}
                  </div>
                  <div class="recipe-item-text">
                      <h3>{{ recipe.title }}</h3>
                      <p>{{ recipe.ingredients|truncatewords:15 }}</p>
                      <p class="recipe-rating">
                          <strong>Rating:</strong>
                          <span class="rating-stars">
                              {% with recipe.avg_rating|default:0 as avg_rating %}
                                  {% for i in "12345"|make_list %}
                                      {% if forloop.counter <= avg_rating %}
                                          <span>★</span>
                                      {% else %}
                                          <span>☆</span>
                                      {% endif %}
                                  {% endfor %}
                              {% endwith %}
                          </span>
                          ({{ recipe.avg_rating|default:"No ratings" }})
                      </p>
                      <a href="{% url 'recipe_detail' recipe.id %}">View Recipe</a>
                  </div>
              </div>
          {% endfor %}
      </div>
  </section>

  <!-- All Recipes Section -->
  <section id="all-recipes">
      <h2>All Recipes</h2>
      <div class="recipe-list">
          {% for recipe in all_recipes %}
              <div class="recipe-item">
                  <div class="recipe-item-img">
                      {% if recipe.image %}
                          <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}">
                      {% else %}
                          <img src="{% static 'images/placeholder.jpg' %}" alt="Placeholder image">
                      {% endif %}
                  </div>
                  <div class="recipe-item-text">
                      <h3>{{ recipe.title }}</h3>
                      <p>{{ recipe.ingredients|truncatewords:15 }}</p>
                      <p class="recipe-rating">
                          <strong>Rating:</strong>
                          <span class="rating-stars">
                              {% with recipe.avg_rating|default:0 as avg_rating %}
                                  {% for i in "12345"|make_list %}
                                      {% if forloop.counter <= avg_rating %}
                                          <span>★</span>
                                      {% else %}
                                          <span>☆</span>
                                      {% endif %}
                                  {% endfor %}
                              {% endwith %}
                          </span>
                          ({{ recipe.avg_rating|default:"No ratings" }})
                      </p>
                      <a href="{% url 'recipe_detail' recipe.id %}">View Recipe</a>
                  </div>
              </div>
          {% endfor %}
      </div>
  </section>

  <!-- Suggested Recipes Section -->
  <section id="suggested-recipes">
      <h2>Suggested Recipes</h2>
      <div class="recipe-list">
          {% for recipe in suggested_recipes %}
              <div class="recipe-item">
                  <div class="recipe-item-img">
                      {% if recipe.image %}
                          <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}">
                      {% else %}
                          <img src="{% static 'images/placeholder.jpg' %}" alt="Placeholder image">
                      {% endif %}
                  </div>
                  <div class="recipe-item-text">
                      <h3>{{ recipe.title }}</h3>
                      <p>{{ recipe.ingredients|truncatewords:15 }}</p>
                      <p class="recipe-rating">
                          <strong>Rating:</strong>
                          <span class="rating-stars">
                              {% with recipe.avg_rating|default:0 as avg_rating %}
                                  {% for i in "12345"|make_list %}
                                      {% if forloop.counter <= avg_rating %}
                                          <span>★</span>
                                      {% else %}
                                          <span>☆</span>
                                      {% endif %}
                                  {% endfor %}
                              {% endwith %}
                          </span>
                          ({{ recipe.avg_rating|default:"No ratings" }})
                      </p>
                      <a href="{% url 'recipe_detail' recipe.id %}">View Recipe</a>
                  </div>
              </div>
          {% endfor %}
      </div>
  </section>
{% endblock %}